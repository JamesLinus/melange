// Simple IoT system

system MySystem {
	sensor Thermometer {
		provides operation getTemperature(out long temp) {
			print("Thermometer::getTemperature()")
			temp = 55
			print("Done")
		}
	}

	actuator Heater {
		provides operation increase() {
			print("Heater::increase")
		}

		provides operation decrease() {
			print("Heater::decrease")
		}
	}

	board B1 [Arduino] {
		provides Thermometer
	}

	board B2 [RaspberryPi] {
		provides Heater
	}

	sketch {
		activity SimpleSketch {
			nodes {
				initial init1 out (e1),
				action a1 in (e1) out (e2,e3) service getTemperature,
				action a2 in (e2,e3 ) out (e4) service increase,
				action a3 out (e5) service decrease,
				final final1 in (e5)
			}
			edges {
				flow e1 from init1 to a1,
				flow e2 from a1 to a2,
				flow e3 from a1 to a3,
				flow e4 from a2 to final1,
				flow e5 from a3 to final1
			}
		}
	}
}