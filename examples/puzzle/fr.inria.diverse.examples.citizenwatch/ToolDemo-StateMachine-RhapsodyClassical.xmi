<?xml version="1.0" encoding="ASCII"?>
<CompleteFSM:StateMachine
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:CompleteFSM="http://CompleteFSM"
    xsi:schemaLocation="http://CompleteFSM ../fr.inria.diverse.examples.puzzle.fsm.CompleteFSM/composition-gen/CompleteFSM.ecore">
  <subvertex
      xsi:type="CompleteFSM:Pseudostate"
      name="Initial"
      outgoing="//@transitions.1"/>
  <subvertex
      xsi:type="CompleteFSM:CompositeState"
      name="Q"
      incoming="//@transitions.1"
      initialState="//@subvertex.1/@states.1">
    <states
        xsi:type="CompleteFSM:Pseudostate"
        name="InitialQ"
        outgoing="//@transitions.0"/>
    <states
        xsi:type="CompleteFSM:State"
        name="X"
        incoming="//@transitions.0"
        outgoing="//@transitions.2 //@transitions.3"/>
    <states
        xsi:type="CompleteFSM:State"
        name="Y"
        incoming="//@transitions.2"
        outgoing="//@transitions.4"/>
    <states
        xsi:type="CompleteFSM:State"
        name="Z"
        incoming="//@transitions.3"
        outgoing="//@transitions.13"/>
    <states
        xsi:type="CompleteFSM:CompositeState"
        name="T"
        incoming="//@transitions.4"
        outgoing="//@transitions.10"
        initialState="//@subvertex.1/@states.4/@states.1">
      <states
          xsi:type="CompleteFSM:Pseudostate"
          name="InitialT"
          outgoing="//@transitions.5"/>
      <states
          xsi:type="CompleteFSM:Pseudostate"
          name="Conditional"
          incoming="//@transitions.5"
          outgoing="//@transitions.6 //@transitions.7"
          kind="conditional"/>
      <states
          xsi:type="CompleteFSM:State"
          name="O"
          incoming="//@transitions.6"
          outgoing="//@transitions.8"/>
      <states
          xsi:type="CompleteFSM:State"
          name="P"
          incoming="//@transitions.7"
          outgoing="//@transitions.9"/>
      <states
          xsi:type="CompleteFSM:State"
          name="R"
          incoming="//@transitions.8 //@transitions.9"
          outgoing="//@transitions.12"/>
    </states>
    <states
        xsi:type="CompleteFSM:State"
        name="W"
        incoming="//@transitions.10"
        outgoing="//@transitions.11"/>
    <states
        xsi:type="CompleteFSM:State"
        name="K"
        incoming="//@transitions.11 //@transitions.12 //@transitions.13"/>
  </subvertex>
  <transitions
      name="InitialToX"
      target="//@subvertex.1/@states.1"
      source="//@subvertex.1/@states.0"/>
  <transitions
      name="InitialToQ"
      target="//@subvertex.1"
      source="//@subvertex.0"/>
  <transitions
      name="XToY"
      target="//@subvertex.1/@states.2"
      source="//@subvertex.1/@states.1">
    <trigger
        expression="e1"/>
  </transitions>
  <transitions
      name="XToZ"
      target="//@subvertex.1/@states.3"
      source="//@subvertex.1/@states.1">
    <trigger
        expression="e2"/>
  </transitions>
  <transitions
      name="YToT"
      target="//@subvertex.1/@states.4"
      source="//@subvertex.1/@states.2">
    <trigger
        expression="e3"/>
    <effect
        xsi:type="CompleteFSM:Program">
      <statements
          xsi:type="CompleteFSM:PutInMemory"
          key="x">
        <value
            xsi:type="CompleteFSM:IntegerLit"
            value="1"/>
      </statements>
    </effect>
    <effect
        xsi:type="CompleteFSM:Program">
      <statements
          xsi:type="CompleteFSM:PutInMemory"
          key="y">
        <value
            xsi:type="CompleteFSM:ArithmeticExpression">
          <left
              xsi:type="CompleteFSM:GetFromMemory"
              key="x"/>
          <right
              xsi:type="CompleteFSM:IntegerLit"
              value="1"/>
        </value>
      </statements>
    </effect>
  </transitions>
  <transitions
      name="InitialTToConditional"
      target="//@subvertex.1/@states.4/@states.1"
      source="//@subvertex.1/@states.4/@states.0"/>
  <transitions
      name="ConditionalToO"
      target="//@subvertex.1/@states.4/@states.2"
      source="//@subvertex.1/@states.4/@states.1">
    <guard xsi:type="CompleteFSM:RelationalConstraint">
      <left
          xsi:type="CompleteFSM:CVarRef"
          name="y"/>
      <right
          xsi:type="CompleteFSM:CInteger"
          value="1"/>
    </guard>
  </transitions>
  <transitions
      name="ConditionalToP"
      target="//@subvertex.1/@states.4/@states.3"
      source="//@subvertex.1/@states.4/@states.1">
    <guard xsi:type="CompleteFSM:RelationalConstraint"
        operator="greaterThan">
      <left
          xsi:type="CompleteFSM:CVarRef"
          name="y"/>
      <right
          xsi:type="CompleteFSM:CInteger"
          value="1"/>
    </guard>
  </transitions>
  <transitions
      name="OToR"
      target="//@subvertex.1/@states.4/@states.4"
      source="//@subvertex.1/@states.4/@states.2">
    <trigger
        expression="e4"/>
  </transitions>
  <transitions
      name="PToR"
      target="//@subvertex.1/@states.4/@states.4"
      source="//@subvertex.1/@states.4/@states.3">
    <trigger
        expression="e4"/>
  </transitions>
  <transitions
      name="TToW"
      target="//@subvertex.1/@states.5"
      source="//@subvertex.1/@states.4">
    <trigger
        expression="e4"/>
  </transitions>
  <transitions
      name="WToK"
      target="//@subvertex.1/@states.6"
      source="//@subvertex.1/@states.5">
    <trigger
        expression="e5"/>
  </transitions>
  <transitions
      name="RToK"
      target="//@subvertex.1/@states.6"
      source="//@subvertex.1/@states.4/@states.4">
    <trigger
        expression="e5"/>
  </transitions>
  <transitions
      name="ZToK"
      target="//@subvertex.1/@states.6"
      source="//@subvertex.1/@states.3">
    <trigger
        expression="e5"/>
  </transitions>
</CompleteFSM:StateMachine>
