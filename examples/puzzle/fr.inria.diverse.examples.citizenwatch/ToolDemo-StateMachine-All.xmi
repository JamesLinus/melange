<?xml version="1.0" encoding="ASCII"?>
<CompleteFSM:StateMachine
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:CompleteFSM="http://CompleteFSM"
    xsi:schemaLocation="http://CompleteFSM ../fr.inria.diverse.examples.puzzle.fsm.CompleteFSM/composition-gen/CompleteFSM.ecore">
  <regions name="Region1">
    <subvertex
        xsi:type="CompleteFSM:Pseudostate"
        name="InitialS1"
        outgoing="//@regions.0/@transitions.0"/>
    <subvertex
        xsi:type="CompleteFSM:State"
        name="S1"
        incoming="//@regions.0/@transitions.0"
        outgoing="//@regions.0/@transitions.1"/>
    <subvertex
        xsi:type="CompleteFSM:State"
        name="S2"
        incoming="//@regions.0/@transitions.1"
        outgoing="//@regions.0/@transitions.2"/>
    <subvertex
        xsi:type="CompleteFSM:State"
        name="S3"
        incoming="//@regions.0/@transitions.2">
      <ownedRegions
          name="RegionS3">
        <subvertex
            xsi:type="CompleteFSM:Pseudostate"
            name="InitialS3"
            outgoing="//@regions.0/@subvertex.3/@ownedRegions.0/@transitions.0"/>
        <subvertex
            xsi:type="CompleteFSM:Pseudostate"
            name="C"
            incoming="//@regions.0/@subvertex.3/@ownedRegions.0/@transitions.0"
            outgoing="//@regions.0/@subvertex.3/@ownedRegions.0/@transitions.1 //@regions.0/@subvertex.3/@ownedRegions.0/@transitions.2"
            kind="conditional"/>
        <subvertex
            xsi:type="CompleteFSM:State"
            name="S4"
            incoming="//@regions.0/@subvertex.3/@ownedRegions.0/@transitions.1"
            outgoing="//@regions.0/@transitions.3"/>
        <subvertex
            xsi:type="CompleteFSM:State"
            name="S5"
            incoming="//@regions.0/@subvertex.3/@ownedRegions.0/@transitions.2"
            outgoing="//@regions.0/@transitions.4"/>
        <transitions
            name="InitialS3ToC"
            target="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.1"
            source="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.0"/>
        <transitions
            name="CToS4"
            target="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.2"
            source="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.1">
          <guard
              xsi:type="CompleteFSM:RelationalConstraint">
            <left
                xsi:type="CompleteFSM:CVarRef"
                name="y"/>
            <right
                xsi:type="CompleteFSM:CInteger"
                value="1"/>
          </guard>
        </transitions>
        <transitions
            name="CToS5"
            target="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.3"
            source="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.1">
          <guard
              xsi:type="CompleteFSM:RelationalConstraint">
            <left
                xsi:type="CompleteFSM:CVarRef"
                name="y"/>
            <right
                xsi:type="CompleteFSM:CInteger"
                value="2"/>
          </guard>
        </transitions>
      </ownedRegions>
    </subvertex>
    <subvertex
        xsi:type="CompleteFSM:FinalState"
        name="S6"
        incoming="//@regions.0/@transitions.3 //@regions.0/@transitions.4"/>
    <transitions
        name="InitialS1ToS1"
        target="//@regions.0/@subvertex.1"
        source="//@regions.0/@subvertex.0"/>
    <transitions
        name="S1ToS2"
        target="//@regions.0/@subvertex.2"
        source="//@regions.0/@subvertex.1">
      <trigger
          expression="e0"/>
    </transitions>
    <transitions
        name="S2ToS3"
        target="//@regions.0/@subvertex.3"
        source="//@regions.0/@subvertex.2">
      <trigger
          expression="e1"/>
      <effect
          xsi:type="CompleteFSM:Program">
        <statements
            xsi:type="CompleteFSM:PutInMemory"
            key="x">
          <value
              xsi:type="CompleteFSM:IntegerLit"
              value="1"/>
        </statements>
      </effect>
      <effect
          xsi:type="CompleteFSM:Program">
        <statements
            xsi:type="CompleteFSM:PutInMemory"
            key="y">
          <value
              xsi:type="CompleteFSM:ArithmeticExpression">
            <left
                xsi:type="CompleteFSM:IntegerLit"
                value="1"/>
            <right
                xsi:type="CompleteFSM:GetFromMemory"
                key="x"/>
          </value>
        </statements>
      </effect>
    </transitions>
    <transitions
        name="S4ToS6"
        target="//@regions.0/@subvertex.4"
        source="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.2">
      <trigger
          expression="e2"/>
    </transitions>
    <transitions
        name="S5ToS6"
        target="//@regions.0/@subvertex.4"
        source="//@regions.0/@subvertex.3/@ownedRegions.0/@subvertex.3">
      <trigger
          expression="e2"/>
    </transitions>
  </regions>
  <regions name="Region2">
    <subvertex
        xsi:type="CompleteFSM:Pseudostate"
        name="InitialRegion2"
        outgoing="//@regions.1/@transitions.0"/>
    <subvertex
        xsi:type="CompleteFSM:State"
        name="S7"
        incoming="//@regions.1/@transitions.0"
        outgoing="//@regions.1/@transitions.1"/>
    <subvertex
        xsi:type="CompleteFSM:State"
        name="S8"
        incoming="//@regions.1/@transitions.1"
        outgoing="//@regions.1/@transitions.2">
      <ownedRegions
          name="RegionS8">
        <subvertex
            xsi:type="CompleteFSM:Pseudostate"
            name="InitialS8"
            outgoing="//@regions.1/@subvertex.2/@ownedRegions.0/@transitions.0"/>
        <subvertex
            xsi:type="CompleteFSM:State"
            name="S9"
            incoming="//@regions.1/@subvertex.2/@ownedRegions.0/@transitions.0"
            outgoing="//@regions.1/@subvertex.2/@ownedRegions.0/@transitions.1"/>
        <subvertex
            xsi:type="CompleteFSM:State"
            name="S10"
            incoming="//@regions.1/@subvertex.2/@ownedRegions.0/@transitions.1"
            outgoing="//@regions.1/@transitions.3"/>
        <transitions
            name="InitialS8ToS9"
            target="//@regions.1/@subvertex.2/@ownedRegions.0/@subvertex.1"
            source="//@regions.1/@subvertex.2/@ownedRegions.0/@subvertex.0"/>
        <transitions
            name="S9ToS10"
            target="//@regions.1/@subvertex.2/@ownedRegions.0/@subvertex.2"
            source="//@regions.1/@subvertex.2/@ownedRegions.0/@subvertex.1">
          <trigger
              expression="e4"/>
        </transitions>
      </ownedRegions>
    </subvertex>
    <subvertex
        xsi:type="CompleteFSM:State"
        name="S11"
        incoming="//@regions.1/@transitions.2"
        outgoing="//@regions.1/@transitions.4"/>
    <subvertex
        xsi:type="CompleteFSM:State"
        name="S12"
        incoming="//@regions.1/@transitions.3 //@regions.1/@transitions.4"/>
    <transitions
        name="InitialRegion2ToS7"
        target="//@regions.1/@subvertex.1"
        source="//@regions.1/@subvertex.0"/>
    <transitions
        name="S7ToS8"
        target="//@regions.1/@subvertex.2"
        source="//@regions.1/@subvertex.1">
      <trigger
          expression="e3"/>
    </transitions>
    <transitions
        name="S8ToS11"
        target="//@regions.1/@subvertex.3"
        source="//@regions.1/@subvertex.2">
      <trigger
          expression="e4"/>
    </transitions>
    <transitions
        name="S10ToS12"
        target="//@regions.1/@subvertex.4"
        source="//@regions.1/@subvertex.2/@ownedRegions.0/@subvertex.2">
      <trigger
          expression="e5"/>
    </transitions>
    <transitions
        name="S11ToS12"
        target="//@regions.1/@subvertex.4"
        source="//@regions.1/@subvertex.3">
      <trigger
          expression="e5"/>
    </transitions>
  </regions>
</CompleteFSM:StateMachine>
